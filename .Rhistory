subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt",
fill = "Sex") +
ylab("Life expectancy \n(age 0)") +
xlab("Year \n (1993 to 2023)") +
ylim(50, 100) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
scale_fill_manual("Sex",
values = c("Female", "Male")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year \n (1993 to 2023)") +
ylim(50, 100) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
guides(color = guide_legend(title = "Sex")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year \n (1993 to 2023)") +
ylim(50, 100) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
?guide_legend
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
guides(color = guide_legend(title = "Sex")) +
scale_color_manual(labels = c("Female", "Male")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year \n (1993 to 2023)") +
ylim(50, 100) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
?scale_color_manual
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
guides(color = guide_legend(title = "Sex")) +
scale_color_manual(labels = c("Female", "Male")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year \n (1993 to 2023)") +
ylim(50, 100) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
# process-data
life_table$sex <- ifelse(life_table$sex == "female", "Female", "Male")
life_table_long <- melt(setDT(life_table),
id.vars = c("sex"),
variable.name = "year")
life_table_long$year <- substr(life_table_long$year, 2, 5)
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
guides(color = guide_legend(title = "Sex")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year \n (1993 to 2023)") +
ylim(50, 100) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
ggsave("output/life_exptancy_plot.png",
plot = life_exptancy_plot,
width = 300,
height = 180,
unit = "mm",
dpi = 300)
deaths_nc <- read.csv("input/deaths_nc_diseases.csv")
View(deaths_nc)
# process-data
deaths_nc_long <- melt(setDT(deaths_nc),
id.vars = c("year"),
variable.name = "level")
View(deaths_nc_long)
# process-data
deaths_nc_long <- melt(setDT(deaths_nc),
id.vars = c("year"),
variable.name = "level")
ggplot(deaths_nc_long,
aes(x = year,
y = value)) +
stat_summary(geom = "ribbon",
fun.ymin = "min",
fun.ymax = "max",
aes(fill = "#e18b22"),
alpha = 0.3) +
theme_bw()
# process-data
deaths_nc_long <- melt(setDT(deaths_nc),
id.vars = c("year"),
variable.name = "level")
ggplot(deaths_nc_long,
aes(x = year,
y = value)) +
stat_summary(geom = "ribbon",
fun.min = "min",
fun.max = "max",
aes(fill = "#e18b22"),
alpha = 0.3) +
labs(title = paste0("Deaths due to non-communicable diseases (NCDs)"),
subtitle = "Line chart with uncertainty estimates for NCD deaths over time",
caption = "Data source: Institute for Health Metrics and Evaluation") +
ylab("Deaths per 100,000") +
xlab("Year") +
ylim(0, 2000) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"),
legend.position = "none")
ggplot(deaths_nc_long,
aes(x = year,
y = value)) +
stat_summary(geom = "ribbon",
fun.min = "min",
fun.max = "max",
aes(fill = "#e18b22"),
alpha = 0.3) +
labs(title = paste0("Deaths due to non-communicable diseases (NCDs)"),
subtitle = "Line chart with uncertainty estimates for NCD deaths over time",
caption = "Data source: Institute for Health Metrics and Evaluation") +
ylab("Deaths per 100,000") +
xlab("Year") +
ylim(500, 1500) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"),
legend.position = "none")
ggplot(deaths_nc_long,
aes(x = year,
y = value)) +
stat_summary(geom = "ribbon",
fun.min = "min",
fun.max = "max",
aes(fill = "#e18b22")) +
labs(title = paste0("Deaths due to non-communicable diseases (NCDs)"),
subtitle = "Line chart with uncertainty estimates for NCD deaths over time",
caption = "Data source: Institute for Health Metrics and Evaluation") +
ylab("Deaths per 100,000") +
xlab("Year") +
ylim(500, 1500) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"),
legend.position = "none")
# process-data
deaths_nc_long <- melt(setDT(deaths_nc),
id.vars = c("year"),
variable.name = "level")
# plot data
deaths_nc_plot <-
ggplot(deaths_nc_long,
aes(x = year,
y = value)) +
stat_summary(geom = "ribbon",
fun.min = "min",
fun.max = "max",
aes(fill = "#e18b22")) +
labs(title = paste0("Deaths due to non-communicable diseases (NCDs)"),
subtitle = "Line chart with uncertainty estimates for NCD deaths over time",
caption = "Data source: Institute for Health Metrics and Evaluation") +
ylab("Deaths per 100,000") +
xlab("Year") +
ylim(500, 1500) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"),
legend.position = "none")
dev.new(width = 300,
height = 180,
unit = "mm",
noRStudioGD=TRUE)
ggsave("output/deaths_nc_plot.png",
plot = deaths_nc_plot,
width = 300,
height = 180,
unit = "mm",
dpi = 300)
# plot data
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
guides(color = guide_legend(title = "Sex")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year") +
ylim(50, 100) +
scale_x_discrete(labels = c("1993", "2003", "2013", "2020")) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
# plot data
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
guides(color = guide_legend(title = "Sex")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year") +
ylim(50, 100) +
scale_x_date(date_minor_breaks = "10 years") +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
# plot data
life_exptancy_plot <-
ggplot(data = life_table_long,
aes(x = year,
y = value,
color = sex,
group = sex)) +
geom_line() +
geom_point() +
guides(color = guide_legend(title = "Sex")) +
labs(title = paste0("Average life expectancy in Germany"),
subtitle = "Line chart of changes in life expectancy",
caption = "Data source: Statistisches Bundesamt") +
ylab("Life expectancy \n(age 0)") +
xlab("Year") +
ylim(50, 100) +
theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
panel.background = element_blank(), axis.line = element_line(colour = "black"),
plot.title = element_text(color = "#2F2E41", size = 12, face = "bold"),
plot.subtitle = element_text(color = "#454543"),
plot.caption = element_text(color = "#454543", face = "italic"))
life_exptancy_plot
cost_care <- rea.dsv("input/cost_care_2020.csv")
cost_care <- rea.csv("input/cost_care_2020.csv")
cost_care <- read.csv("input/cost_care_2020.csv")
View(cost_care)
500/400
cost_care_pp <- cost_care[, c("ice_code",
"ice_label",
"laymen_label",
"person_2015",
"person_2020")]
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
setDT(cost_care_pp)
cost_care_pp$person_2015_rev <- cost_care_pp[, sum(person_2015), by = laymen_label]
cost_care_pp[, sum(person_2015), by = laymen_label]
cost_care_pp[, sum(person_2015), by = laymen_label][2]
cost_care_pp[, sum(person_2015), by = laymen_label][, 2]
cost_care_pp$p2015_rev <- cost_care_pp[, sum(person_2015), by = laymen_label][, 2]
cost_care_pp
cost_care_pp[, sum(person_2015), by = laymen_label][, 2][1]
as.vector(cost_care_pp[, sum(person_2015), by = laymen_label][, 2])
cost_care_pp[, sum(person_2015), by = laymen_label]$V1
cost_care_pp$p2015_rev <- cost_care_pp[, sum(person_2015), by = laymen_label]$V1
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
setDT(cost_care_pp)
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
cost_care_pp$p2015_rev <- ave(cost_care_pp$person_2015,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp
cost_care_pp$p2020_rev <- ave(cost_care_pp$person_2020,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp
cost_care_pp <- cost_care_pp[cost_care_pp$icd_label == "ICD10-J40-J47", ]
cost_care_pp
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
cost_care_pp$p2015_rev <- ave(cost_care_pp$person_2015,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp$p2020_rev <- ave(cost_care_pp$person_2020,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp <- cost_care_pp[!cost_care_pp$icd_label == "ICD10-J40-J47", ]
cost_care_pp
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
cost_care_pp$p2015_rev <- ave(cost_care_pp$person_2015,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp$p2020_rev <- ave(cost_care_pp$person_2020,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp <- cost_care_pp[!cost_care_pp$icd_label == "ICD10-J40-J47",
c("icd_code",
"icd_label",
"laymen_label",
"person_2015_rev",
"person_2020_rev")]
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
cost_care_pp$p2015_rev <- ave(cost_care_pp$person_2015,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp$p2020_rev <- ave(cost_care_pp$person_2020,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp <- cost_care_pp[!cost_care_pp$icd_label == "ICD10-J40-J47",
c("icd_code",
"icd_label",
"laymen_label",
"p2015_rev",
"p2020_rev")]
cost_care_pp
cost_care_pp <- cost_care_pp[!cost_care_pp$icd_code == "ICD10-J40-J47",
c("icd_code",
"icd_label",
"laymen_label",
"p2015_rev",
"p2020_rev")]
cost_care_pp
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
cost_care_pp$r2015 <- ave(cost_care_pp$person_2015,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp$r2020 <- ave(cost_care_pp$person_2020,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp <- cost_care_pp[!cost_care_pp$icd_code == "ICD10-J40-J47",
c("laymen_label",
"r2015",
"r2020")]
cost_care_pp_long <- melt(setDT(cost_care_pp),
id.vars = c("laymen_label"),
variable.name = "year")
cost_care_pp_long
cost_care_pp_long$year <- substr(cost_care_pp_long$year, 2, 5)
cost_care_pp_long
cost_care_pp_long$conditions <- ifelse(cost_care_pp_long$laymen_label == "cancers",
"Cancers",
ifelse(cost_care_pp_long$laymen_label == "diabetes",
"Diabetes",
ifelse(cost_care_pp_long$laymen_label == "mental_behavioural_disorders",
"Mental & Behavioural",
ifelse(cost_care_pp_long$laymen_label == "respiratory_conditions",
"Respiratory condititions",
"Musculoskeletal conditions"))))
View(cost_care_pp_long)
cost_care_pp <- cost_care[, c("icd_code",
"icd_label",
"laymen_label",
"person_2015",
"person_2020")]
cost_care_pp$r2015 <- ave(cost_care_pp$person_2015,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp$r2020 <- ave(cost_care_pp$person_2020,
cost_care_pp$laymen_label,
FUN = cumsum)
cost_care_pp <- cost_care_pp[!cost_care_pp$icd_code == "ICD10-J40-J47",
c("laymen_label",
"r2015",
"r2020")]
cost_care_pp_long <- melt(setDT(cost_care_pp),
id.vars = c("laymen_label"),
variable.name = "year")
cost_care_pp_long$year <- substr(cost_care_pp_long$year, 2, 5)
cost_care_pp_long$icd <- ifelse(cost_care_pp_long$laymen_label == "cancers",
"C00 - D48",
ifelse(cost_care_pp_long$laymen_label == "diabetes",
"E10 - E14",
ifelse(cost_care_pp_long$laymen_label == "mental_behavioural_disorders",
"F00 - F99",
ifelse(cost_care_pp_long$laymen_label == "cardiovascular_diseases",
"I00 - I99",
ifelse(cost_care_pp_long$laymen_label == "respiratory_conditions",
"J46 - J47")
"M00 - M99"))))
cost_care_pp_long$icd <- ifelse(cost_care_pp_long$laymen_label == "cancers",
"C00 - D48",
ifelse(cost_care_pp_long$laymen_label == "diabetes",
"E10 - E14",
ifelse(cost_care_pp_long$laymen_label == "mental_behavioural_disorders",
"F00 - F99",
ifelse(cost_care_pp_long$laymen_label == "cardiovascular_diseases",
"I00 - I99",
ifelse(cost_care_pp_long$laymen_label == "respiratory_conditions",
"J46 - J47",
"M00 - M99")))))_
cost_care_pp_long$icd <- ifelse(cost_care_pp_long$laymen_label == "cancers",
"C00 - D48",
ifelse(cost_care_pp_long$laymen_label == "diabetes",
"E10 - E14",
ifelse(cost_care_pp_long$laymen_label == "mental_behavioural_disorders",
"F00 - F99",
ifelse(cost_care_pp_long$laymen_label == "cardiovascular_diseases",
"I00 - I99",
ifelse(cost_care_pp_long$laymen_label == "respiratory_conditions",
"J46 - J47",
"M00 - M99")))))
cost_care_pp_long
ggplot(cost_care_pp_long,
aes(fill = year,
y = value,
x = icd)) +
geom_bar(position = "dodge",
stat = "identity")
